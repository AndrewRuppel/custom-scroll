/* jQuery Custom Scroll plugin | (c) 2014 Mostovoy Andrey | https://github.com/standys/custom-scroll/blob/master/LICENSE */
!function(t){function o(o,e){function r(){var t=0|c.prop("scrollHeight"),r=o.innerHeight(),n=r-e.offsetTop-e.offsetBottom,i=Math.max(n*r/t|0,e.barMinHeight),a=(n-i)/(t-r);return{ratio:a,height:r,heightScroll:n,heightTotal:t,barHeight:i}}function n(){var t=r(),n=t.barHeight>=t.heightScroll;n!==s&&(o.toggleClass(e.prefix+"hidden",n),s=n);var i=c.scrollTop(),a=i*t.ratio;0>a&&(a=0),a>t.heightScroll-t.barHeight&&(a=t.heightScroll-t.barHeight),h.height(t.barHeight).css("top",e.offsetTop+a)}function i(){h.remove(),o.removeClass(e.prefix+"container").removeData("custom-scroll"),c.contents().appendTo(o),c.remove()}var a=o.data("custom-scroll");e=a?a.options:t.extend({},t.fn.customScroll.defaultOptions,e);var s;if(o.hasClass(e.prefix+"container")){var a=o.data("custom-scroll");if(a)return a.updateBar(),a}o.addClass(e.prefix+"container");var c=o.children("."+e.prefix+"inner");c.length||(c=o.wrapInner('<div class="'+e.prefix+'inner"></div>').children());var l=c[0].offsetWidth-c[0].clientWidth;c.css("marginRight",-l+"px");var h=o.children("."+e.prefix+"bar");h.length||(h=t(e.barHtml).addClass(e.prefix+"bar").appendTo(o));var u=t("body");h.on("mousedown touchstart",function(t){t.stopPropagation(),t.preventDefault();var o=c.scrollTop(),e=t.clientY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0].clientY,n=r().ratio;u.on("mousemove.custom-scroll touchmove.custom-scroll",function(t){t.stopPropagation(),t.preventDefault();var r=t.clientY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0].clientY,i=r-e;c.scrollTop(o+i/n)}),u.on("mouseup.custom-scroll touchend.custom-scroll",function(){u.off(".custom-scroll")})}),c.on("scroll",n),n();var f={$container:o,$bar:h,$inner:c,destroy:i,updateBar:n,options:e};return o.data("custom-scroll",f),f}t.fn.customScroll=function(e){return"destroy"===e?(this.each(function(){var o=t(this).data("custom-scroll");o&&o.destroy()}),this):1===this.length?o(this,e):void this.each(function(){o(t(this),e)})},t.fn.customScroll.defaultOptions={prefix:"custom-scroll_",barMinHeight:10,offsetTop:0,offsetBottom:0,barHtml:"<div />"}}(jQuery);