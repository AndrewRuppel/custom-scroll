/* jQuery Custom Scroll plugin v0.6.3 | (c) 2014 Mostovoy Andrey | https://github.com/standy/custom-scroll/blob/master/LICENSE */
!function(i){function t(t,e){function s(r){var s=o[r];t["scroll"+s.Dir](0);var a=e.prefix+"bar"+s.suffix,l=t.children("."+a);return l.length||(l=i(e.barHtml).addClass(a).appendTo(t)),l.on("mousedown touchstart",function(i){i.stopPropagation(),i.preventDefault();var t=m["scroll"+s.Dir](),o=i[s.clientAxis]||i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0][s.clientAxis],e=n(r).ratio;D.on("mousemove.custom-scroll touchmove.custom-scroll",function(i){i.stopPropagation(),i.preventDefault();var r=i[s.clientAxis]||i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0][s.clientAxis],n=r-o;m["scroll"+s.Dir](t+n/e)}),D.on("mouseup.custom-scroll touchend.custom-scroll",function(){D.off(".custom-scroll")})}),l}function n(i){var r=o[i],s=0|m.prop("scroll"+r.Dim),n=t["inner"+r.Dim](),a=m["inner"+r.Dim](),l=n-e["offset"+r.Dir]-e["offset"+r.Dir2];h["x"==i?"y":"x"]||(l-=e["track"+r.Dim]);var c=Math.max(l*n/s|0,e["barMin"+r.Dim]),d=(l-c)/(s-a);return"y"==i&&t.is("#example-hard")&&console.log("dim",n,a,l,s,c,d),{ratio:d,dim:n,scroll:l,total:s,bar:c}}function a(){f||(f=t.is(":visible"),t.scrollTop(0)),l("y"),l("x")}function l(i){var r=o[i],s=n(i);if(s.total){var a=m["scroll"+r.Dir]();if(u[i].scrollPos!==a||u[i].scroll!==s.scroll||u[i].total!==s.total){u[i]=s,u[i].scrollPos=a;var l=s.bar>=s.scroll;l!==h[i]&&(t.toggleClass(e.prefix+"hidden"+r.suffix,l),h[i]=l);var c=a*s.ratio;0>c&&(c=0),c>s.scroll-s.bar&&(c=s.scroll-s.bar),b[i][r.dim](s.bar).css(r.dir,e["offset"+r.Dir]+c)}}}function c(){b.x.remove(),b.y.remove(),t.removeClass(e.prefix+"container").removeData("custom-scroll").css("padding",""),m.contents().appendTo(t),m.remove()}var d=t.data("custom-scroll");e=d?d.options:i.extend({},r,e);var f=t.is(":visible"),h={},u={x:{},y:{}};if(t.hasClass(e.prefix+"container")){var d=t.data("custom-scroll");if(d)return d.updateBar(),d}var m=t.children("."+e.prefix+"inner");m.length||(m=t.wrapInner('<div class="'+e.prefix+'inner"></div>').children()),t.addClass(e.prefix+"container");var p=i('<div class="'+e.prefix+'inner" />').appendTo("body").css({overflow:"scroll"})[0],v=p.offsetWidth-p.clientWidth,g=p.offsetHeight-p.clientHeight;p.parentElement.removeChild(p),m.css({paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),marginRight:-v+"px",marginBottom:-g+"px",paddingBottom:g+"px"});var x=t.css("maxHeight");parseInt(x)&&m.css("maxHeight",x),t.css({padding:0}).scrollTop(0);var D=i("body"),b={};b.y=s("y"),b.x=s("x"),m.on("scroll",a),a();var y={$container:t,$bar:b.y,$barX:b.x,$inner:m,destroy:c,updateBar:a,options:e};return t.data("custom-scroll",y),y}i.fn.customScroll=function(o){return this.length?"destroy"===o?(this.each(function(){var t=i(this).data("custom-scroll");t&&t.destroy()}),this):1===this.length?t(this,o):void this.each(function(){t(i(this),o)}):i.extend(r,o)};var r={prefix:"custom-scroll_",barMinHeight:10,barMinWidth:10,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0,trackWidth:10,trackHeight:10,barHtml:"<div />"},o={x:{dim:"width",Dim:"Width",dir:"left",Dir:"Left",dir2:"right",Dir2:"Right",clientAxis:"clientX",suffix:"-x"},y:{dim:"height",Dim:"Height",dir:"top",Dir:"Top",dir2:"bottom",Dir2:"Bottom",clientAxis:"clientY",suffix:""}}}(jQuery);